<html>
	<body>
		<form>
			<a href="intent:#Intent;action=com.modom.printervitreum.CUSTOMACTION;package=com.modom.printervitreum;component=com.modom.printervitreum/.activity.MainActivity;S.identifier=09E31463-D795-4B17-BE07-F12688A9B3EE;S.url=http%3A//rthserver.ddns.net%3A8090;end"> Abrir Android APP </a>

			<div class="form-group form-show-validation row">
                                    <label class="col-lg-2 col-md-3 col-sm-4 mt-sm-2 text-left">Foto do Recibo </label>
                                    <div class="col-lg-12">
                                        <input type="file" class="form-control-file" id="Cadastrar_Img" onchange="proccessData()">
                                        <input type="hidden" class="form-control" id="Cadastrar_Imagem">
                                    </div>
                                </div>

			<img id="imgRecibo" src="dinossauro1.jpg" />
		</form>
	</body>
</html>

<script>
    function setEncodedImage(encodedImage) {
            // Chame a função processData
            proccessData(encodedImage);
        }

	//#### ConvertImage
        async function converImageToBase64(inputId) {
    	let imageInput = document.getElementById(inputId);
    	let image = imageInput.files;
	
	console.log(image)
	console.log(imageInput)

    if (image && image[0]) {
        return new Promise(resolve => {
            const reader = new FileReader();
            reader.onload = ev => {
                resolve(ev.target.result);
            };
            reader.readAsDataURL(image[0]);
        });
    }
}

async function proccessData(encodedImage) {
	let image;
	if (!encodedImage) {
	    image = await converImageToBase64('Cadastrar_Img');
	} else {
		image = encodedImage
	}
	
    document.getElementById('Cadastrar_Imagem').value = image;

    var imagemElement = document.getElementById("imgRecibo");
    imagemElement.src = image;
    imagemElement.style.maxWidth = "100%";
    imagemElement.style.maxHeight = "100%";
}
	
</script>
